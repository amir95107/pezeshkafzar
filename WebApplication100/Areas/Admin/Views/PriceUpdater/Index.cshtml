
@{
    ViewBag.Title = "Index";
    Layout = "~/Areas/Admin/Views/Shared/_DefaultAdmin.cshtml";
}

<div style="height:75px"></div>
<div class="container bg-white p-2" dir="rtl">

    <h2 class="text-center p-2 border shadow ">بروزرسانی قیمتهای محصولات</h2>
    <div class="container">
        <a class="btn btn-success d-block d-block m-auto" onclick="startUpdating()">شروع بروزرسانی</a>
        <div class="border p-5 mt-4 mb-4 text-center" id="resultContainer" style="display:none" dir="rtl">
            <span id="waiting-text">در حال بروزرسانی قیمت ها، اندکی صبر </span>
            <svg id="waiting-loader" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink" style="margin: auto; background: rgba(0, 0, 0, 0) none repeat scroll 0% 0%; display: block; shape-rendering: auto;" width="200px" height="200px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
                <rect x="17.5" y="30" width="10" height="40" fill="#00b58c">
                    <animate attributeName="y" repeatCount="indefinite" dur="1s" calcMode="spline" keyTimes="0;0.5;1" values="18;30;30" keySplines="0 0.5 0.5 1;0 0.5 0.5 1" begin="-0.2s" />
                    <animate attributeName="height" repeatCount="indefinite" dur="1s" calcMode="spline" keyTimes="0;0.5;1" values="64;40;40" keySplines="0 0.5 0.5 1;0 0.5 0.5 1" begin="-0.2s" />
                </rect>
                <rect x="42.5" y="30" width="10" height="40" fill="#6d6e71">
                    <animate attributeName="y" repeatCount="indefinite" dur="1s" calcMode="spline" keyTimes="0;0.5;1" values="20.999999999999996;30;30" keySplines="0 0.5 0.5 1;0 0.5 0.5 1" begin="-0.1s" />
                    <animate attributeName="height" repeatCount="indefinite" dur="1s" calcMode="spline" keyTimes="0;0.5;1" values="58.00000000000001;40;40" keySplines="0 0.5 0.5 1;0 0.5 0.5 1" begin="-0.1s" />
                </rect>
                <rect x="67.5" y="30" width="10" height="40" fill="#ef4351">
                    <animate attributeName="y" repeatCount="indefinite" dur="1s" calcMode="spline" keyTimes="0;0.5;1" values="20.999999999999996;30;30" keySplines="0 0.5 0.5 1;0 0.5 0.5 1" />
                    <animate attributeName="height" repeatCount="indefinite" dur="1s" calcMode="spline" keyTimes="0;0.5;1" values="58.00000000000001;40;40" keySplines="0 0.5 0.5 1;0 0.5 0.5 1" />
                </rect>
            </svg>
        </div>
    </div>
</div>

@section Scripts{
    <script>
        startUpdating = () => {
            $('#resultContainer').fadeIn();
            $.post('/admin/PriceUpdater/UpdateData', (res) => {
                $('#waiting-text,#waiting-loader').hide();
                $('#resultContainer').html(`${res} محصول با موفقیت بروزرسانی شدند`)
            })
        }
    </script>
}

